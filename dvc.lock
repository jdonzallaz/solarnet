schema: '2.0'
stages:
  train-baseline:
    cmd: python -m solarnet.main train
    deps:
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
    - path: solarnet/main.py
      md5: feec11e98fd1abb809708172ec7cbf3a
      size: 1554
    - path: solarnet/models/baseline.py
      md5: 4d5632d2f513677fb49937a3fc44c602
      size: 6425
    - path: solarnet/tasks/train.py
      md5: 4d7a6e512beca5ed9b816287c239b2a2
      size: 4102
    params:
      config/config.yaml:
        data:
          validation_size: 0.1
          channel: 211
          size: 256
          targets:
            classes:
            - Quiet: < 1e-6
            - '>=C': '>= 1e-6'
          time_steps:
          - 3
        gpus: 1
        model:
          activation: relu6
        name: Baseline binary classification model
        seed: 42
        tracking: true
        trainer:
          epochs: 20
          batch_size: 128
          learning_rate: 0.005
          patience: 12
    outs:
    - path: models/baseline/history.png
      md5: 2368dedd3535ad242140a1d4a08f6bf8
      size: 48620
    - path: models/baseline/model.ckpt
      md5: ee5014943ee29334fb536d8ac133e577
      size: 321431
    - path: models/baseline/model_summary.txt
      md5: ea4d0736a2ad363d42b9d70caf6f186d
      size: 1643
  test-baseline:
    cmd: python -m solarnet.main test
    deps:
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
    - path: models/baseline/model.ckpt
      md5: ee5014943ee29334fb536d8ac133e577
      size: 321431
    - path: solarnet/main.py
      md5: feec11e98fd1abb809708172ec7cbf3a
      size: 1554
    - path: solarnet/models/baseline.py
      md5: 4d5632d2f513677fb49937a3fc44c602
      size: 6425
    - path: solarnet/tasks/test.py
      md5: ef803c071d4b98f08f184baca5ef95d7
      size: 5965
    params:
      config/config.yaml:
        data:
          validation_size: 0.1
          channel: 211
          size: 256
          targets:
            classes:
            - Quiet: < 1e-6
            - '>=C': '>= 1e-6'
          time_steps:
          - 3
        gpus: 1
        model:
          activation: relu6
        seed: 42
        trainer:
          epochs: 20
          batch_size: 128
          learning_rate: 0.005
          patience: 12
    outs:
    - path: models/baseline/confusion_matrix.png
      md5: 81369aedb3791a62b3a932aa06fad6f4
      size: 22654
    - path: models/baseline/metrics.yaml
      md5: dc3e910fd1a8660429a6944f7e8df1eb
      size: 217
    - path: models/baseline/test_samples.png
      md5: 0bbc632b1638ea51a66987b89b258b3c
      size: 756230
  download-dataset:
    cmd: python -m solarnet.main download sdo-benchmark-zip
    deps:
    - path: config/minio.yaml
      md5: 2cf2c6bc04bcddb76df1d97aae80ba0a
      size: 117
    - path: solarnet/main.py
      md5: feec11e98fd1abb809708172ec7cbf3a
      size: 1554
    outs:
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
