schema: '2.0'
stages:
  train-baseline:
    cmd: python -m solarnet.main train
    deps:
    - path: config/config.yaml
      md5: bd8bc5fbd8939b730426333d1d8083aa
      size: 238
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
    - path: solarnet/main.py
      md5: 4d266c087916e2df354b3d09a52f16e5
      size: 1483
    - path: solarnet/models/baseline.py
      md5: 4d5632d2f513677fb49937a3fc44c602
      size: 6250
    - path: solarnet/tasks/train.py
      md5: 249a03e9c1f3ceec6d2e1f0e9efa6402
      size: 3346
    params:
      config/config.yaml:
        data:
          validation_size: 0.1
          channel: '171'
          size: 256
        gpus: 1
        model:
          activation: relu
        name: Baseline binary classification model
        seed: 42
        tracking: true
        trainer:
          epochs: 25
          batch_size: 64
          learning_rate: 0.005
          patience: 12
    outs:
    - path: models/baseline/model.ckpt
      md5: 941e14737ce7b539dfebc4609111d5ba
      size: 321620
  test-baseline:
    cmd: python -m solarnet.main test
    deps:
    - path: config/config.yaml
      md5: bd8bc5fbd8939b730426333d1d8083aa
      size: 238
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
    - path: models/baseline/model.ckpt
      md5: 941e14737ce7b539dfebc4609111d5ba
      size: 321620
    - path: solarnet/main.py
      md5: 4d266c087916e2df354b3d09a52f16e5
      size: 1483
    - path: solarnet/models/baseline.py
      md5: 4d5632d2f513677fb49937a3fc44c602
      size: 6250
    - path: solarnet/tasks/test.py
      md5: 812c41eed5a57a17ad68b19d1b1eff42
      size: 4889
    params:
      config/config.yaml:
        data:
          validation_size: 0.1
          channel: '171'
          size: 256
        gpus: 1
        model:
          activation: relu
        seed: 42
        trainer:
          epochs: 25
          batch_size: 64
          learning_rate: 0.005
          patience: 12
    outs:
    - path: models/baseline/confusion_matrix.png
      md5: da1241be0302b37c66a3a1fa290ab716
      size: 20886
    - path: models/baseline/metrics.yaml
      md5: 58a701a2a6cfb30af7a218879e9875a2
      size: 175
    - path: models/baseline/test_samples.png
      md5: bbf6be8b9313c4bd269810c7018b81de
      size: 993010
  download-dataset:
    cmd: python -m solarnet.main download sdo-benchmark-zip
    deps:
    - path: config/minio.yaml
      md5: 2cf2c6bc04bcddb76df1d97aae80ba0a
      size: 117
    - path: solarnet/main.py
      md5: 4d266c087916e2df354b3d09a52f16e5
      size: 1483
    outs:
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
