schema: '2.0'
stages:
  train-baseline:
    cmd: python -m solarnet.main train
    deps:
    - path: config/config.yaml
      md5: 6847f43b9ab870f9b032233cb23c7451
      size: 210
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
    - path: solarnet/main.py
      md5: 50b63f6154cda212c065a92bc74683e9
      size: 1421
    - path: solarnet/models/baseline.py
      md5: ff9accbaafd8da878f6517ec5dac2b9e
      size: 5136
    params:
      config/config.yaml:
        data:
          validation_size: 0.1
          channel: '171'
          size: 256
        gpus: 1
        name: Baseline binary classification model
        seed: 42
        tracking: true
        trainer:
          epochs: 25
          batch_size: 64
          learning_rate: 0.005
          patience: 8
    outs:
    - path: models/baseline/model.ckpt
      md5: 18e40cd220097425edddfad93fa9955e
      size: 321175
  test-baseline:
    cmd: python -m solarnet.main test
    deps:
    - path: config/config.yaml
      md5: 6847f43b9ab870f9b032233cb23c7451
      size: 210
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
    - path: models/baseline/model.ckpt
      md5: 18e40cd220097425edddfad93fa9955e
      size: 321175
    - path: solarnet/main.py
      md5: 50b63f6154cda212c065a92bc74683e9
      size: 1421
    - path: solarnet/models/baseline.py
      md5: ff9accbaafd8da878f6517ec5dac2b9e
      size: 5136
    params:
      config/config.yaml:
        data:
          validation_size: 0.1
          channel: '171'
          size: 256
        gpus: 1
        seed: 42
        trainer:
          epochs: 25
          batch_size: 64
          learning_rate: 0.005
          patience: 8
    outs:
    - path: models/baseline/confusion_matrix.png
      md5: 4188e58993462cc4f8edf507c114d1b0
      size: 21743
    - path: models/baseline/metrics.yaml
      md5: ea01701baae0c6d350cb5c197822d178
      size: 53
    - path: models/baseline/test_samples.png
      md5: b485068946415f7bb371b65e2aaffef1
      size: 993998
  download-dataset:
    cmd: python -m solarnet.main download sdo-benchmark-zip
    deps:
    - path: config/minio.yaml
      md5: 2cf2c6bc04bcddb76df1d97aae80ba0a
      size: 117
    - path: solarnet/main.py
      md5: 50b63f6154cda212c065a92bc74683e9
      size: 1421
    outs:
    - path: data/sdo-benchmark.placeholder
      md5: 03bc278e4376c8585af17fe4557b0337
      size: 162
